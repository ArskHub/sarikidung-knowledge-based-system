<!doctype html>
<html lang="id">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ganti Password â€” SariKidung Admin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    :root { --gold:#926237; --dark:#1a1a1b; --border:#ede0cf; }
    body { font-family:'Poppins',sans-serif; background:#f4f1ed; min-height:100vh; }
    .sidebar {
      width:240px; min-height:100vh; background:var(--dark);
      border-right:3px solid var(--gold); position:fixed; top:0; left:0;
      display:flex; flex-direction:column; z-index:100;
    }
    .sidebar-brand { padding:1.5rem 1.25rem 1rem; border-bottom:1px solid rgba(255,255,255,.07); }
    .logo-mark { width:38px; height:38px; border-radius:8px; border:1.5px solid var(--gold); display:inline-flex; align-items:center; justify-content:center; margin-bottom:.5rem; }
    .logo-mark span { font-family:'Playfair Display',serif; font-size:.88rem; font-weight:700; color:var(--gold); }
    .sidebar-brand h6 { font-family:'Playfair Display',serif; color:#fff; font-size:.95rem; margin:0; }
    .sidebar-brand h6 span { color:var(--gold); }
    .sidebar-brand p { color:rgba(255,255,255,.35); font-size:.68rem; margin:0; letter-spacing:1.5px; text-transform:uppercase; }
    .sidebar-nav { padding:1rem 0; flex:1; }
    .nav-section { padding:.5rem 1.25rem .25rem; font-size:.62rem; color:rgba(255,255,255,.25); text-transform:uppercase; letter-spacing:2px; font-weight:700; }
    .sidebar-link { display:flex; align-items:center; gap:.75rem; padding:.65rem 1.25rem; color:rgba(255,255,255,.5); font-size:.83rem; font-weight:500; text-decoration:none; transition:all .2s; border-left:3px solid transparent; }
    .sidebar-link:hover { color:#fff; background:rgba(255,255,255,.05); }
    .sidebar-link.active { color:var(--gold); border-left-color:var(--gold); background:rgba(146,98,55,.08); }
    .sidebar-link i { width:16px; text-align:center; font-size:.85rem; }
    .sidebar-footer { padding:1rem 1.25rem; border-top:1px solid rgba(255,255,255,.07); }
    .avatar { width:32px; height:32px; border-radius:50%; background:var(--gold); display:flex; align-items:center; justify-content:center; font-size:.75rem; color:#fff; font-weight:700; }
    .main { margin-left:240px; padding:2rem; }
    .form-card { background:#fff; border-radius:16px; padding:2rem; border:1px solid var(--border); box-shadow:0 2px 12px rgba(146,98,55,.06); max-width:480px; }
    .form-label { font-size:.8rem; font-weight:600; color:#555; margin-bottom:.35rem; }
    .form-control { border-radius:9px; border:1.5px solid #e8e0d8; padding:.65rem .9rem; font-size:.86rem; transition:border-color .2s; }
    .form-control:focus { border-color:var(--gold); box-shadow:0 0 0 3px rgba(146,98,55,.1); }
    .btn-save { background:var(--gold); color:#fff; border:none; border-radius:9px; padding:.7rem 2rem; font-weight:600; font-size:.88rem; }
    .btn-save:hover { background:#7a512d; }
    .alert { border-radius:10px; font-size:.84rem; }
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="sidebar-brand">
      <div class="logo-mark"><span>SK</span></div>
      <h6>SARI<span>KIDUNG</span></h6>
      <p>Admin Panel</p>
    </div>
    <nav class="sidebar-nav">
      <div class="nav-section">Menu</div>
      <a href="{{ url_for('admin_panel') }}" class="sidebar-link"><i class="fas fa-th-large"></i> Dashboard</a>
      <a href="{{ url_for('admin_kidung') }}" class="sidebar-link">
        <i class="fas fa-scroll"></i> Kelola Kidung
      </a>
      <a href="{{ url_for('admin_tambah') }}" class="sidebar-link"><i class="fas fa-plus-circle"></i> Tambah Kidung</a>
      <a href="{{ url_for('library') }}" target="_blank" class="sidebar-link"><i class="fas fa-book-open"></i> Lihat Library</a>
      <div class="nav-section mt-3">Akun</div>
      <a href="{{ url_for('admin_ganti_password') }}" class="sidebar-link active"><i class="fas fa-key"></i> Ganti Password</a>
      <a href="{{ url_for('home') }}" target="_blank" class="sidebar-link"><i class="fas fa-external-link-alt"></i> Lihat Website</a>
      <a href="{{ url_for('admin_logout') }}" class="sidebar-link" style="color:#e74c3c!important;"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </nav>
    <div class="sidebar-footer">
      <div class="d-flex align-items-center gap-2">
        <div class="avatar">{{ current_user.username[0].upper() }}</div>
        <div>
          <div style="color:#fff;font-size:.8rem;font-weight:600;">{{ current_user.username }}</div>
          <div style="color:rgba(255,255,255,.35);font-size:.68rem;">Administrator</div>
        </div>
      </div>
    </div>
  </aside>

  <main class="main">
    <div class="mb-4">
      <h4 style="font-family:'Playfair Display',serif;font-size:1.4rem;">
        Ganti <span style="color:var(--gold);">Password</span>
      </h4>
      <p style="color:#999;font-size:.8rem;margin:0;">Ubah password akun administrator</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="alert alert-{{ 'danger' if cat == 'danger' else 'success' }} mb-3" style="max-width:480px;">
            <i class="fas fa-{{ 'exclamation-circle' if cat == 'danger' else 'check-circle' }} me-2"></i>{{ msg }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="form-card">
      <form method="POST" action="{{ url_for('admin_ganti_password') }}">
        <div class="mb-3">
          <label class="form-label">Password Lama</label>
          <input type="password" name="password_lama" class="form-control" placeholder="Masukkan password lama" required/>
        </div>
        <div class="mb-3">
          <label class="form-label">Password Baru</label>
          <input type="password" name="password_baru" class="form-control" placeholder="Minimal 8 karakter" required/>
        </div>
        <div class="mb-4">
          <label class="form-label">Konfirmasi Password Baru</label>
          <input type="password" name="password_ulang" class="form-control" placeholder="Ulangi password baru" required/>
        </div>
        <div class="d-flex gap-2">
          <button type="submit" class="btn-save"><i class="fas fa-save me-2"></i>Simpan</button>
          <a href="{{ url_for('admin_panel') }}" style="display:inline-block;padding:.7rem 1.5rem;border:1.5px solid #e0d8d0;border-radius:9px;color:#666;text-decoration:none;font-size:.88rem;">Batal</a>
        </div>
      </form>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>